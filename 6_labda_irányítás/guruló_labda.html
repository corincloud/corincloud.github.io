<html>

<head>
    <title>guruló_labda</title>
    <style>
        #rajzlap {
            display: block;
            border: 1px solid rgb(96, 212, 247);
            width: 300px;
            height: 300px;
            position: relative;
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%);
        }

        body {
            margin-top: 0%;
        }
    </style>

</head>

<body>
    <svg id="rajzlap" viewBox="0 0 300 300">
    </svg>
    <script> 
        var x_pozicio = 0;
        var y_pozicio = 0;
        var körök_száma = 0;
        var szélesség = window.innerWidth;
        var rajzlap_balszél = szélesség / 2 - 150;
        var hosszúság = window.innerHeight;
        var rajzlap_teteje = hosszúság / 2 - 150;
        var rajzlap = document.getElementById("rajzlap");
        rajzlap.onmousedown = kör_létrehozás;
        window.addEventListener("keydown", billentyű_lenyomás);
        window.addEventListener("keyup", billentyű_felengedés);

        function kör_létrehozás(e) {
            if (körök_száma < 1) {
                var x_koordináta = e.pageX - rajzlap_balszél;
                var y_koordináta = e.pageY - rajzlap_teteje;
                x_pozicio = x_koordináta;
                y_pozicio = y_koordináta;

                var kör = document.createElementNS("http://www.w3.org/2000/svg", 'circle');
                kör.setAttribute("r", 6);
                kör.setAttribute("cx", x_pozicio.toString());
                kör.setAttribute("cy", y_pozicio.toString());
                kör.setAttribute('id', "kor");
                rajzlap.appendChild(kör);
                körök_száma++;
            }
        }

        var kapcsoló = 0;
        var irány = 0; // 0 felfele, 1 jobbra, 2 lefele, 3 balra
        function billentyű_lenyomás(e) {
            switch (e.key) {
                case 'ArrowUp':
                    kapcsoló = 1;
                    break;
                case 'ArrowRight':
                    irány = (irány + 1) % 4;
                    break;
                case 'ArrowLeft':
                    irány = (irány + 3) % 4;
                    break;
            }
        }

        function billentyű_felengedés(e) {
            if (e.key == "ArrowUp") {
                kapcsoló = 0;
            }
        }

        function szimulacio_indito() {
            var aktualis_ido = Date.now() / 1000;
            var szimulacio_differencia = (aktualis_ido - legutobbi_szimulacio);
            szimulacio(szimulacio_differencia);
            legutobbi_szimulacio = aktualis_ido;
        }

        function szimulacio(ido_kulonbseg) {

            if (körök_száma == 1) {

                switch (irány) {
                    case 0:
                        var kör = document.getElementById("kor");
                        kör.setAttribute("fill", "black");
                        if (kapcsoló == 1) {
                            var v0 = 100; // pixel/secundum
                            var s0 = y_pozicio;
                            var t = ido_kulonbseg;

                            var s = s0 - v0 * t;
                            y_pozicio = s;

                            kor_pozicio_frissites();
                        }
                        break;
                    case 1:
                        var kör = document.getElementById("kor");
                        kör.setAttribute("fill", "red");
                        if (kapcsoló == 1) {
                            var v0 = 100; // pixel/secundum
                            var s0 = x_pozicio;
                            var t = ido_kulonbseg;

                            var s = s0 + v0 * t;
                            x_pozicio = s;

                            kor_pozicio_frissites();
                        }
                        break;
                    case 2:
                        var kör = document.getElementById("kor");
                        kör.setAttribute("fill", "blue");
                        if (kapcsoló == 1) {
                            var v0 = 100; // pixel/secundum
                            var s0 = y_pozicio;
                            var t = ido_kulonbseg;

                            var s = s0 + v0 * t;
                            y_pozicio = s;

                            kor_pozicio_frissites();
                        }
                        break;
                    case 3:
                        var kör = document.getElementById("kor");
                        kör.setAttribute("fill", "green");
                        if (kapcsoló == 1) {
                            var v0 = 100; // pixel/secundum
                            var s0 = x_pozicio;
                            var t = ido_kulonbseg;

                            var s = s0 - v0 * t;
                            x_pozicio = s;

                            kor_pozicio_frissites();
                        }
                        break;
                }


                /*if (kapcsoló == 1) {
                    var v0 = -100; // pixel/secundum
                    var s0 = y_pozicio;
                    var t = ido_kulonbseg;

                    var s = s0 + v0 * t;
                    y_pozicio = s;

                    kor_pozicio_frissites();
                }*/
            }
        }

        function kor_pozicio_frissites() {
            var kör = document.getElementById("kor");
            kör.setAttribute("cx", x_pozicio.toString());
            kör.setAttribute("cy", y_pozicio.toString());
        }
        var legutobbi_szimulacio = Date.now() / 1000;
        setInterval(szimulacio_indito, 10);


    </script>
</body>

</html>